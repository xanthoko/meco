import messages.idl;
import brokers.br;

Broker: R4ABroker
Broker: MyRabbit
Broker: MyRedis

OutNode thermoSensor{
    ports:
        - publisher:
            topic: thermo.humidity
            message: ThermoSensorMsg2
        - rpc_client thermoRPC:
            message: SonarSensorMsgR
    broker: MyRabbit
}

OutNode sonarSensor{
    ports:
        - publisher:
            topic: ss.data
            message: SonarSensorMsg
    broker: MyRabbit
}

InNode TV{
    ports:
        - subscriber:
            topic: tv.data
    broker: MyRabbit
}

InNode ACDevice{
    ports:
        - subscriber:
            topic: thermo.humidity
        - rpc_service thermoRPC:
            message: SonarSensorMsgR
    broker: MyRabbit
}

Bridge R4A2MyRab{
    R4ABroker(thermo.humidity)-MyRedis(thermo.humidity)
}
