import messages.idl;
import brokers.br;

Broker: R4ABroker (default)
Broker: MyRabbit

Node Take{
    inports:
        - subscriber:
            topic: collected.data
    outports:
        - rpc_client testRPC:
            message: SonarSensorMsgR
}

Node Give{
    outports:
        - publisher:
            topic: new.data
            message: ThermoSensorMsg
    inports:
        - rpc_service testRPC:
            message: SonarSensorMsgR
    broker: MyRabbit
}

TopicBridge MR2R4A{
    MyRabbit(new.data) - R4ABroker(collected.data)
}

RPCBridge R4A2MR{
    R4ABroker(testRPC) - MyRabbit(testRPC)
}

Proxy testProxy{
    inport:
        - subscriber:
            topic: pp.pp
    outport:
        - publisher:
            topic: pp.pp
    url: "http://localhost:8000"
    method: GET
    broker: R4ABroker
}
