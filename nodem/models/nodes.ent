import messages.idl;
import brokers.br;

Broker: R4ABroker
Broker: MyRabbit

OutNode thermoSensor{
    ports:
        - publisher:
            topic: test.me.node
            message: ThermoSensorMsg
        - publisher:
            topic: thermo.humidity
            message: ThermoSensorMsg2
        - rpc_client thermoRPC:
            message: ThermoSensorMsgR
    broker: R4ABroker
}

OutNode sonarSensor{
    ports:
        - publisher:
            topic: sonar.data
            message: SonarSensorMsg
        - rpc_client sonarRPC:
            message: SonarSensorMsgR
    broker: R4ABroker
}

InNode TV{
    ports:
        - subscriber:
            topic: s.s
    broker: R4ABroker
}

InNode ACDevice{
    ports:
        - subscriber:
            topic: thermo.humidity
        - rpc_service thermoRPC:
            message: ThermoSensorMsgR
    broker: R4ABroker
}

BiNode testNode{
    inport:
        - subscriber:
            topic: test.me.node
    outport:
        - publisher:
            topic: test.me.node
    broker: R4ABroker
}

Proxy testProxy{
    inport: 
        - subscriber:
            topic: new.data
    outport:
        - publisher:
            topic: collected.data
    url: "http://localhost:8000"
    broker: R4ABroker
}