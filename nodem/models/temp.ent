import messages.idl;
import brokers.br;

Broker: MyRabbit
Broker: R4ABroker (default)

Node ProxyTake1{
    inports:
        - subscriber:
            topic: proxy.pub
    outports:
        - rpc_client tempRPC:
            message: SonarSensorMsgR
}

Node ProxyGive1{
    outports:
        - publisher:
            topic: proxy.sub
}

Node BridgeGive1{
    outports:
        - publisher:
            topic: bridge.pub
}

Node BridgeTake1{
    inports:
        - subscriber:
            topic: bridge.sub
    broker: MyRabbit
}

Node MixedGive1{
    outports:
        - publisher:
            topic: mixed.pub
}

Node MixedTake1{
    inports:
        - subscriber:
            topic: mixed.sub
    broker: MyRabbit
}

TopicBridge MixedBridge1{
    R4ABroker(mixed.sub) - MyRabbit(mixed.sub)
}

TopicBridge Bridge1{
    R4ABroker(bridge.pub) - MyRabbit(bridge.sub)
}

Proxy testProxy{
    inport:
        - subscriber:
            topic: proxy.sub
    outport:
        - publisher:
            topic: proxy.pub
    url: "http://localhost:8000"
    method: GET
}

Proxy MixedProxy{
    inport:
        - subscriber:
            topic: mixed.pub
    outport:
        - publisher:
            topic: mixed.sub
    url: "http://localhost:8000"
    method: GET
}
